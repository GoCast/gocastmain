<!DOCTYPE html>
<html>
	<head>
		<title>Plugin Demo (libjingle rev: 247)</title>
		<script type="text/javascript">
			function onpluginload() {
				var plugin = document.getElementById('localPlayer');
				plugin.getUserMedia({video: true, audio: true}, function(stream) {
					console.log('Success: ', stream);
					plugin.init('localPlayer','',null);
					plugin.addStream(stream);
					plugin.createOffer(function(desc) {
						console.log('CreateOffer: ', desc);
						plugin.setLocalDescription('offer', desc, function() {
							console.log('SetLocalDescription: Success');
							plugin.source = stream;
						}, function(error) {
							console.log('SetLocalDescription: ', error);
						});
					}, function(error) {
						console.log('CreateOffer: ', error);
					});
				}, function(msg) {alert(msg);});
			}
		</script>
	</head>
	<body>
		<object id="localPlayer" type="application/x-gocastplayer" width="640" height="480">
			<param name="onload" value="onpluginload"></param>
		</object>
	</body>
</html>